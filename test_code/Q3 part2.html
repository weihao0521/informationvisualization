<!DOCTYPE html>
<meta charset="utf-8">
 
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 
var createCircle = function(year){
    var color = d3.scale.category10();

var width = 960,
    height = 500;
 
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    
d3.json("../data/data.json", function(json) {
    /* Define the data for the circles */
    if(year == 2013){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes)
    }
    else if (year == 2012){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes2)
    }
    else if (year == 2011){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes3)
    }
    else if (year == 2010){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes4)
    }
    else if (year == 2009){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes5)
    }
    else if (year == 2008){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes6)
    }
    else if (year == 2007){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes7)
    }
    else if (year == 2006){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes8)
    }
    else if (year == 2005){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes9)
    }
    else if (year == 2004){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes10)
    }
    else if (year == 2003){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes11)
    }
    else if (year == 2002){
        var elem = svg.selectAll("g myCircleText")
        .data(json.nodes12)
    }

  
    /*Create and place the "blocks" containing the circle and the text */  
    var elemEnter = elem.enter()
        .append("g")
        .attr("transform", function(d){return "translate("+d.x+",80)"})
 
    /*Create the circle for each block */
    var circle = elemEnter.append("circle")
        .attr("r", function(d){return d.r} )
        .attr("stroke","black")
        .attr("fill", "white")
        .transition()
                                     .duration(2000)
        .style("fill", function(d) { return color(d.x); })
        .style("stroke-width", 0)
        .style("stroke", "black")
        .style("cursor", "pointer")
 
    /* Create the text for each block */
    elemEnter.append("text")
        .attr("dx", function(d){return -20})
        .attr("dy", function(d){return 90})
        .text(function(d){return d.label})
})
}; 
createCircle(2002);
</script>
 
</body>